module.exports=[66858,(a,b,c)=>{"use strict";b.exports=a.r(46586).vendored["react-ssr"].ReactDOM},47485,(a,b,c)=>{"use strict";b.exports=a.r(46586).vendored["react-ssr"].ReactServerDOMTurbopackClient},64791,a=>{"use strict";var b=a.i(64973);let c=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let e=(0,b.forwardRef)(({color:a="currentColor",size:e=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...d,width:e,height:e,stroke:a,strokeWidth:g?24*Number(f)/Number(e):f,className:c("lucide",h),...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),f=(a,d)=>{let f=(0,b.forwardRef)(({className:f,...g},h)=>(0,b.createElement)(e,{ref:h,iconNode:d,className:c(`lucide-${a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,f),...g}));return f.displayName=`${a}`,f};a.s(["default",()=>f],64791)},93104,a=>{"use strict";var b=a.i(34162),c=a.i(73610);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},36028,a=>{"use strict";var b=a.i(34162),c=a.i(60042),d=a.i(9559),e=a.i(73610);let f=(0,d.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function g({className:a,variant:d,asChild:g=!1,...h}){let i=g?c.Slot:"span";return(0,b.jsx)(i,{"data-slot":"badge",className:(0,e.cn)(f({variant:d}),a),...h})}a.s(["Badge",()=>g])},12744,a=>{"use strict";let b=(0,a.i(64791).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);a.s(["Mail",()=>b],12744)},14155,a=>{"use strict";var b=a.i(64973),c=a.i(60133),d=a.i(91494),e=a.i(37392),f=a.i(96457),g=a.i(35593);function h(){let a=(0,e.useQueryClient)(),{activeConversation:h,setActiveConversation:i}=(0,f.useChatStore)(),{user:j}=(0,f.useAuthStore)(),k=(0,b.useRef)(null),l=(0,c.useQuery)({queryKey:["conversations"],queryFn:async()=>{let{data:a}=await g.apiClient.get("/api/messages/conversations");return a},staleTime:3e4}),m=(0,c.useQuery)({queryKey:["messages",h],queryFn:async()=>{if(!h)return[];let{data:a}=await g.apiClient.get(`/api/messages/conversations/${h}`);return a},enabled:!!h,staleTime:1e4,refetchInterval:5e3}),n=(0,d.useMutation)({mutationFn:async a=>{let{data:b}=await g.apiClient.post("/api/messages",a);return b},onSuccess:b=>{a.setQueryData(["messages",h],a=>a?[...a,b]:[b]),a.invalidateQueries({queryKey:["conversations"]})}}),o=(0,d.useMutation)({mutationFn:async a=>(await g.apiClient.put(`/api/messages/${a}/read`),a),onSuccess:b=>{a.setQueryData(["messages",h],a=>a?.map(a=>a.id===b?{...a,is_read:!0}:a))}}),p=(0,b.useCallback)(async a=>{if(!h||!j)return!1;try{return await n.mutateAsync({receiver_id:h,content:a}),!0}catch{return!1}},[h,j,n]),q=(0,b.useCallback)(()=>{k.current&&clearTimeout(k.current),k.current=setTimeout(()=>{},2e3)},[]);return(0,b.useEffect)(()=>()=>{k.current&&clearTimeout(k.current)},[]),{conversations:l.data||[],messages:m.data||[],activeConversation:h,isLoadingConversations:l.isLoading,isLoadingMessages:m.isLoading,setActiveConversation:i,sendMessage:p,handleTyping:q,markAsRead:o.mutate,refetchConversations:l.refetch,refetchMessages:m.refetch,isSending:n.isPending}}a.s(["useChat",()=>h])},21932,a=>{"use strict";var b=a.i(34162),c=a.i(29255),d=a.i(64973),e=a.i(80100),f=a.i(12744),g=a.i(46795),h=a.i(7366),i=a.i(59848),j=a.i(93104),k=a.i(86217),l=a.i(36028),m=a.i(11180),n=a.i(96457),o=a.i(14155);function p(){let{isAuthenticated:a,user:p}=(0,n.useAuthStore)(),{conversations:q}=(0,o.useChat)(),r=(0,c.useRouter)();if((0,d.useEffect)(()=>{a||r.push("/login")},[a,r]),!a)return null;let s=q.map(a=>({id:a.other_user_id,username:a.other_user_username,unread_count:a.unread_count}));return(0,b.jsx)(i.AppLayout,{title:"Team",children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(e.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:(0,b.jsxs)(j.Card,{children:[(0,b.jsx)(j.CardHeader,{children:(0,b.jsxs)(j.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(g.Users,{className:"h-5 w-5"}),"Your Profile"]})}),(0,b.jsx)(j.CardContent,{children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(k.Avatar,{className:"h-16 w-16",children:(0,b.jsx)(k.AvatarFallback,{className:"text-xl",children:p?.username?.charAt(0).toUpperCase()||"U"})}),(0,b.jsx)("span",{className:"absolute bottom-0 right-0 h-4 w-4 rounded-full border-2 border-card bg-green-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:p?.username}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:p?.email}),(0,b.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,b.jsx)(l.Badge,{variant:"default",children:"Online"}),(0,b.jsx)(l.Badge,{variant:"outline",children:p?.role})]})]})]})})]})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"mb-4 text-lg font-semibold text-foreground",children:"People You've Chatted With"}),0===s.length?(0,b.jsx)(j.Card,{children:(0,b.jsxs)(j.CardContent,{className:"py-12 text-center",children:[(0,b.jsx)(h.MessageSquare,{className:"mx-auto h-12 w-12 text-muted-foreground/50"}),(0,b.jsx)("h3",{className:"mt-4 text-lg font-medium text-foreground",children:"No conversations yet"}),(0,b.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:"Start a conversation to see team members here"})]})}):(0,b.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:s.map((a,c)=>(0,b.jsx)(e.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*c},children:(0,b.jsx)(j.Card,{children:(0,b.jsxs)(j.CardContent,{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(k.Avatar,{className:"h-12 w-12",children:(0,b.jsx)(k.AvatarFallback,{children:a.username.charAt(0).toUpperCase()})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"font-semibold text-foreground",children:a.username}),a.unread_count>0&&(0,b.jsxs)(l.Badge,{variant:"secondary",className:"mt-1",children:[a.unread_count," unread"]})]})]}),(0,b.jsxs)(m.Button,{variant:"outline",className:"mt-4 w-full bg-transparent",size:"sm",onClick:()=>r.push("/chat"),children:[(0,b.jsx)(f.Mail,{className:"mr-2 h-4 w-4"}),"Message"]})]})})},a.id))})]})]})})}a.s(["default",()=>p])}];

//# sourceMappingURL=Downloads_task-manager-web-app_2bd7bf23._.js.map